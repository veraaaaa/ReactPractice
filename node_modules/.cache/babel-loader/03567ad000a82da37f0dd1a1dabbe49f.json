{"ast":null,"code":"var _jsxFileName = \"/Users/vera/Downloads/\\u5343\\u950B\\u524D\\u7AEFReact\\u9879\\u76EE\\u6559\\u7A0B\\uFF08\\u4F01\\u4E1A\\u7EA7\\u5B9E\\u6218\\u5F00\\u53D1\\uFF09-\\u6E90\\u7801\\u7B14\\u8BB0/11\\u3001\\u8DE8\\u7EC4\\u4EF6\\u72B6\\u6001\\u63A7\\u5236/demoapp/src/components/Category/Category.jsx\";\nimport React, { Component } from 'react';\n// 引用样式\nimport { CateWrap } from \"./styledgory.js\";\nimport { get } from \"../../utils/http\";\nexport default class Category extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      datasource: null,\n      currentItem: \"\",\n      defaultItem: \"\"\n    };\n    this.handleItemClick = item => {\n      return () => {\n        this.setState({\n          currentItem: item\n        });\n      };\n    };\n  }\n  // 在数据改变的时候调用钩子\n  static getDerivedStateFromProps(props, state) {\n    if (props.defaultItem !== state.defaultItem) {\n      return {\n        ...state,\n        defaultItem: props.defaultItem,\n        currentItem: props.defaultItem\n      };\n    }\n    return null;\n  }\n  async componentDidMount() {\n    let result = await get({\n      url: \"/api/category\"\n    });\n    console.log(result);\n    this.setState({\n      datasource: result.data\n    });\n  }\n  render() {\n    let {\n      type\n    } = this.props;\n    let data = this.state.datasource ? Object.keys(this.state.datasource[type]) : [];\n    let contents = this.state.datasource ? this.state.datasource[type][this.state.currentItem] : [];\n    return /*#__PURE__*/React.createElement(CateWrap, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }\n    }, data.map(value => {\n      return this.state.currentItem === value ? /*#__PURE__*/React.createElement(\"li\", {\n        key: value,\n        className: \"active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 38\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 74\n        }\n      }, value)) : /*#__PURE__*/React.createElement(\"li\", {\n        key: value,\n        onClick: this.handleItemClick(value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 38\n        }\n      }, value);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }, contents.map(value => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 32\n        }\n      }, value);\n    }))));\n  }\n}","map":{"version":3,"names":["React","Component","CateWrap","get","Category","state","datasource","currentItem","defaultItem","handleItemClick","item","setState","getDerivedStateFromProps","props","componentDidMount","result","url","console","log","data","render","type","Object","keys","contents","map","value"],"sources":["/Users/vera/Downloads/千锋前端React项目教程（企业级实战开发）-源码笔记/11、跨组件状态控制/demoapp/src/components/Category/Category.jsx"],"sourcesContent":["import React, { Component } from 'react'\n// 引用样式\nimport {CateWrap} from \"./styledgory.js\"\n\n\nimport { get } from \"../../utils/http\"\nexport default class Category extends Component {\n    state={\n        datasource:null,\n        currentItem:\"\",\n        defaultItem:\"\"\n    }\n    // 在数据改变的时候调用钩子\n    static getDerivedStateFromProps(props, state) {\n        if(props.defaultItem!==state.defaultItem){\n            return {\n                ...state,\n                defaultItem:props.defaultItem,\n                currentItem:props.defaultItem\n            }\n        }\n        return null\n    }\n    async componentDidMount() {\n        let result= await get({\n                url:\"/api/category\"\n        })\n        console.log(result)\n        this.setState({\n            datasource:result.data\n        })\n    }\n    handleItemClick=(item)=>{\n        return ()=>{\n            this.setState({\n                currentItem:item\n            })\n        }\n    }\n    render() {\n        let {type}=this.props\n        let data=this.state.datasource? Object.keys(this.state.datasource[type]):[]\n        let contents=this.state.datasource? this.state.datasource[type][this.state.currentItem]:[]\n        return (\n            <CateWrap>\n                <div>\n                    <ul>\n                        {data.map(value=>{\n                                return(\n                                    this.state.currentItem===value\n                                    ?<li key={value} className=\"active\" ><span>{value}</span></li>\n                                    :<li key={value} onClick={this.handleItemClick(value)}>{value}</li>\n                                )\n                            })\n                        }\n                    </ul>\n                </div>\n                <div>\n                    <ul>\n                       {\n                           contents.map((value)=>{\n                               return(\n                               <li key={value}>{value}</li>\n                               )\n                           })\n                       }\n                    </ul>\n                </div>\n            </CateWrap>\n        )\n    }\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC;AACA,SAAQC,QAAQ,QAAO,iBAAiB;AAGxC,SAASC,GAAG,QAAQ,kBAAkB;AACtC,eAAe,MAAMC,QAAQ,SAASH,SAAS,CAAC;EAAA;IAAA;IAAA,KAC5CI,KAAK,GAAC;MACFC,UAAU,EAAC,IAAI;MACfC,WAAW,EAAC,EAAE;MACdC,WAAW,EAAC;IAChB,CAAC;IAAA,KAqBDC,eAAe,GAAEC,IAAI,IAAG;MACpB,OAAO,MAAI;QACP,IAAI,CAACC,QAAQ,CAAC;UACVJ,WAAW,EAACG;QAChB,CAAC,CAAC;MACN,CAAC;IACL,CAAC;EAAA;EA1BD;EACA,OAAOE,wBAAwB,CAACC,KAAK,EAAER,KAAK,EAAE;IAC1C,IAAGQ,KAAK,CAACL,WAAW,KAAGH,KAAK,CAACG,WAAW,EAAC;MACrC,OAAO;QACH,GAAGH,KAAK;QACRG,WAAW,EAACK,KAAK,CAACL,WAAW;QAC7BD,WAAW,EAACM,KAAK,CAACL;MACtB,CAAC;IACL;IACA,OAAO,IAAI;EACf;EACA,MAAMM,iBAAiB,GAAG;IACtB,IAAIC,MAAM,GAAE,MAAMZ,GAAG,CAAC;MACda,GAAG,EAAC;IACZ,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;IACnB,IAAI,CAACJ,QAAQ,CAAC;MACVL,UAAU,EAACS,MAAM,CAACI;IACtB,CAAC,CAAC;EACN;EAQAC,MAAM,GAAG;IACL,IAAI;MAACC;IAAI,CAAC,GAAC,IAAI,CAACR,KAAK;IACrB,IAAIM,IAAI,GAAC,IAAI,CAACd,KAAK,CAACC,UAAU,GAAEgB,MAAM,CAACC,IAAI,CAAC,IAAI,CAAClB,KAAK,CAACC,UAAU,CAACe,IAAI,CAAC,CAAC,GAAC,EAAE;IAC3E,IAAIG,QAAQ,GAAC,IAAI,CAACnB,KAAK,CAACC,UAAU,GAAE,IAAI,CAACD,KAAK,CAACC,UAAU,CAACe,IAAI,CAAC,CAAC,IAAI,CAAChB,KAAK,CAACE,WAAW,CAAC,GAAC,EAAE;IAC1F,oBACI,oBAAC,QAAQ;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACL;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACKY,IAAI,CAACM,GAAG,CAACC,KAAK,IAAE;MACT,OACI,IAAI,CAACrB,KAAK,CAACE,WAAW,KAAGmB,KAAK,gBAC7B;QAAI,GAAG,EAAEA,KAAM;QAAC,SAAS,EAAC,QAAQ;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBAAE;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAOA,KAAK,CAAQ,CAAK,gBAC7D;QAAI,GAAG,EAAEA,KAAM;QAAC,OAAO,EAAE,IAAI,CAACjB,eAAe,CAACiB,KAAK,CAAE;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAEA,KAAK,CAAM;IAE3E,CAAC,CAAC,CAEL,CACH,eACN;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAEOF,QAAQ,CAACC,GAAG,CAAEC,KAAK,IAAG;MAClB,oBACA;QAAI,GAAG,EAAEA,KAAM;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAEA,KAAK,CAAM;IAEhC,CAAC,CAAC,CAEJ,CACH,CACC;EAEnB;AACJ"},"metadata":{},"sourceType":"module"}